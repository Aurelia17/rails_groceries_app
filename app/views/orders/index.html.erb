<div class="homepage">
  <div class="container">
    <p class="fs-1">Orders</p>
  </div>
</div>

<% if current_user.is_admin? %>
  <div class="container">
    <div class="row gx-5 gy-0">
      <table class="table align-middle mb-0 bg-white">
        <thead class="bg-light">
          <tr>
            <th scope="col">Order number</th>
            <th scope="col">Date</th>
            <th scope="col">Total Price</th>
            <th scope="col">Status</th>
            <th scope="col"></th>
          </tr>
        </thead>
          <tbody>
            <% @orders.each do |order| %>
              <tr>
                <td>
                  <div>
                    <p class="fw-normal mb-1"> #<%= link_to order.oder_number, order_path(order), class: "text-dark fw-normal mb-1"%></p>
                  </div>
                </td>
                <td>
                  <div>
                    <p class="text-muted mb-0"> <%= order.created_at.strftime("%d/%m/20%y") %> </p>
                  </div>
                </td>
                <td>
                  <div>
                    <p class="text-muted mb-0">Rs <%= number_with_delimiter(order.total_price.to_i, delimiter: "â€™") %> </p>
                  </div>
                </td>
                <td>
                  <% if order.is_delivered? %>
                    <span class="order-success">Delivered</span>
                  <% else %>
                    <span class="order-awaiting">On it's way</span>
                  <% end %>
                </td>
                <td>
                  <%= link_to order_path(order), class:"text-decoration-none" do %>
                    <h3><i class="fa-solid fa-eye"></i></h3>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
      </table>
    </div>
  </div>
<% elsif current_user.orders == [] %>
  <div class="container">
    <div class="row gx-5 gy-0">
      <table class="table align-middle mb-0 bg-white">
        <thead class="bg-light">
          <tr>
            <th scope="col">Order number</th>
            <th scope="col">Date</th>
            <th scope="col">Total Price</th>
            <th scope="col">Status</th>
            <th scope="col"></th>
          </tr>
        </thead>
      </table>
      <p class="mt-4">No orders history</p>
    </div>
  </div>
<% else %>
  <div class="container">
    <div class="row gx-5 gy-0">
      <table class="table align-middle mb-0 bg-white">
        <thead class="bg-light">
          <tr>
            <th scope="col">Order number</th>
            <th scope="col">Date</th>
            <th scope="col">Total Price</th>
            <th scope="col">Status</th>
            <th scope="col"></th>
          </tr>
        </thead>
          <tbody>
            <% @orders.each do |order| %>
              <tr>
                <td>
                  <div>
                    <p class="fw-normal mb-1"> #<%= link_to order.oder_number, order_path(order), class: "text-dark fw-normal mb-1"%></p>
                  </div>
                </td>
                <td>
                  <div>
                    <p class="text-muted mb-0"> <%= order.created_at.strftime("%d/%m/20%y") %> </p>
                  </div>
                </td>
                <td>
                  <div>
                    <p class="text-muted mb-0 order-price">Rs <%= number_with_delimiter(order.total_price.to_i, delimiter: "'") %> </p>
                  </div>
                </td>
                <td>
                  <% if order.is_delivered? %>
                    <span class="order-success">Delivered</span>
                  <% else %>
                    <span class="order-awaiting">On it's way</span>
                  <% end %>
                </td>
                <td>
                  <%= link_to order_path(order), class:"text-decoration-none" do %>
                    <h3><i class="fa-solid fa-eye"></i></h3>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
      </table>
    </div>
  </div>
<% end %>
